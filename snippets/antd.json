{
  "表单重置-antd": {
    "prefix": "form.resetFields",
    "body": ["form.resetFields"]
  },
  "表单设置-antd": {
    "prefix": "form.setFieldsValue",
    "body": ["form.setFieldsValue"]
  },
  "表单验证-antd": {
    "prefix": "form.validateFields",
    "body": ["form.validateFields"]
  },
  "图标-antd": {
    "prefix": "icon",
    "body": ["import { $1 } from '@ant-design/icons';"]
  },
  "导入antd": {
    "prefix": "antd",
    "body": ["import { $1 } from 'antd'"]
  },
  "通用弹窗": {
    "prefix": "iicommodal",
    "body": [
      "import React, { useEffect } from 'react';",
      "import { Modal, Form, Input, message } from 'antd';",
      "import getFormValues from '@script/getFormValues';",
      "import Rules from '@const/Rules';",
      "const { Item, useForm } = Form;",
      "/**",
      " * 弹窗",
      " */",
      "export default function ${1:${TM_FILENAME_BASE}}(props) {",
      "  const { state, dispatch } = props;",
      "  const [form] = useForm();",
      "  const close = () => {",
      "    form.resetFields();",
      "    dispatch({ visible: false, isEdit: false });",
      "  };",
      "  useEffect(() => {",
      "    if (state.isEdit) {",
      "      const editData = state.rows.find(item=>item._id == state.select)",
      "      form.setFieldsValue(editData);",
      "    }",
      "  }, [state.isEdit]);",
      "  const submit = () => {",
      "    getFormValues(form, async values => {",
      "      if (state.isEdit) {",
      "        values._id = state.select;",
      "      }",
      "      message.success('添加成功')",
      "      close()",
      "    });",
      "  };",
      "  return (",
      "    <Modal",
      "      title='添加'",
      "      visible={state.visible}",
      "      onCancel={close}",
      "      onOk={submit}",
      "    >",
      "      <Form form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 14 }}>",
      "        <Item label='名称' name='name' rules={Rules.required}>",
      "          <Input />",
      "        </Item>",
      "        <Item label='描述' name='desc'>",
      "          <Input />",
      "        </Item>",
      "      </Form>",
      "    </Modal>",
      "  );",
      "}"
    ]
  },
  "通用表格": {
    "prefix": "iicomtable",
    "body": [
      "import React from 'react';",
      "import Table from '@comps/Table';",
      "import useLogic from './useLogic';",
      "import AddDialog from './AddDialog';",
      "import Actionbar from '@comps/Actionbar';",
      "import { ButtonGroup } from '@comps/Buttons';",
      "/**",
      " * 列表",
      " */",
      "export default function ${1:${TM_FILENAME_BASE}}() {",
      "  const props = useLogic();",
      "  const { state, dispatch, onClickAdd, onClickEdit, onClickDelete } = props;",
      "",
      "  const columns = [",
      "    { title: '名称', dataIndex: 'name', width: 200 },",
      "    { title: '描述', dataIndex: 'desc' },",
      "    { title: '创建时间', dataIndex: 'createTime', width: 200 },",
      "  ];",
      "  return (",
      "    <div>",
      "      <AddRole {...props} />",
      "      <Actionbar>",
      "        <ButtonGroup",
      "          onClickAdd={onClickAdd}",
      "          onClickEdit={onClickEdit}",
      "          onClickDelete={onClickDelete}",
      "        />",
      "      </Actionbar>",
      "      <Table",
      "        dataSource={state.rows}",
      "        columns={columns}",
      "        rowSelection={{",
      "          type: 'radio',",
      "          onChange(keys) {",
      "            dispatch({ select: keys[0] });",
      "          },",
      "        }}",
      "      />",
      "    </div>",
      "  );",
      "}"
    ]
  },
  "通用Logic": {
    "prefix": "iicomlogic",
    "body": [
      "import { useEffect, useReducer } from 'react';",
      "import * as api from './api';",
      "import { message } from 'antd';",
      "import deleter from '@script/deleter';",
      "",
      "const initState = {",
      "  visible: false,",
      "  rows: [],",
      "  fetch: 0,",
      "};",
      "",
      "const reducer = (state, action) => {",
      "  return { ...state, ...action };",
      "};",
      "",
      "export default function useLogic() {",
      "  const [state, dispatch] = useReducer(reducer, initState);",
      "",
      "  useEffect(() => {",
      "    api.getRoles().then(res => {",
      "      dispatch({ rows: res });",
      "    });",
      "  }, [state.fetch]);",
      "",
      "  const checker = async => {",
      "    if (!state.select) {",
      "      message.error('请选择');",
      "      return Promise.reject();",
      "    }",
      "    return Promise.resolve();",
      "  };",
      "",
      "  const onClickAdd = () => {",
      "    dispatch({ visible: true });",
      "  };",

      "  const onClickEdit = async () => {",
      "    await checker();",
      "    dispatch({ isEdit: true, visible: true });",
      "  };",
      "",
      "  const onClickDelete = async () => {",
      "    await checker();",
      "    await deleter(() => api.removeRole(state.select));",
      "    dispatch({ fetch: Date.now() });",
      "  };",
      "",
      "  return { state, dispatch, onClickAdd, onClickDelete, onClickEdit };",
      "}"
    ]
  }
}
